<!DOCTYPE html>
{% load static %} {% load bootstrap5 %}
<html lang="pt">
  <head>
    <meta charset="utf-8" />
    <title>{% block title %}Música{% endblock %}</title>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    {% bootstrap_css %} 
    <link rel="stylesheet" href="{% static 'css/styles.css' %}" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <!-- Importar htmx para permitir pesquisa dinâmica - https://app.unpkg.com/htmx.org@1.9.10 -->
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>
  </head>
  <body>
    <header>
      <!-- <h1><a href="{% url 'home' %}">Biblioteca de Música</a></h1> -->

      <!-- Código adaptado de https://getbootstrap.com/docs/5.0/components/navbar/ -->
      <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container-fluid">
          <a class="navbar-brand" href="{% url 'home' %}"
            >Biblioteca de Música</a
          >
          <button
            class="navbar-toggler"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent"
            aria-expanded="false"
            aria-label="Toggle navigation"
          >
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
              <li class="nav-item dropdown">
                <a
                  class="nav-link dropdown-toggle"
                  href=""
                  id="navbarDropdown"
                  role="button"
                  data-bs-toggle="dropdown"
                  aria-expanded="false"
                >
                  Utilizadores
                </a>
                <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                  <li><a class="dropdown-item" href="{% url 'utilizador_list' %}">Ver Todos</a></li>
                  <li><a class="dropdown-item" href="{% url 'utilizador_create' %}">Adicionar</a></li>
                </ul>
              </li>
              <li class="nav-item dropdown">
                <a
                  class="nav-link dropdown-toggle"
                  href=""
                  id="navbarDropdown"
                  role="button"
                  data-bs-toggle="dropdown"
                  aria-expanded="false"
                >
                  Playlists
                </a>
                <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                  <li><a class="dropdown-item" href="{% url 'playlist_list' %}">Ver Todas</a></li>
                  <li><a class="dropdown-item" href="{% url 'playlist_create' %}">Adicionar</a></li>
                </ul>
              </li>
              <li class="nav-item dropdown">
                <a
                  class="nav-link dropdown-toggle"
                  href=""
                  id="navbarDropdown"
                  role="button"
                  data-bs-toggle="dropdown"
                  aria-expanded="false"
                >
                  Artistas
                </a>
                <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                  <li><a class="dropdown-item" href="{% url 'artista_list' %}">Ver Todos</a></li>
                  <li><a class="dropdown-item" href="{% url 'artista_create' %}">Adicionar</a></li>
                </ul>
              </li>
              <li class="nav-item dropdown">
                <a
                  class="nav-link dropdown-toggle"
                  href=""
                  id="navbarDropdown"
                  role="button"
                  data-bs-toggle="dropdown"
                  aria-expanded="false"
                >
                  Álbuns
                </a>
                <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                  <li><a class="dropdown-item" href="{% url 'album_list' %}">Ver Todos</a></li>
                  <li><a class="dropdown-item" href="{% url 'album_create' %}">Adicionar</a></li>
                </ul>
              </li>
              <li class="nav-item dropdown">
                <a
                  class="nav-link dropdown-toggle"
                  href=""
                  id="navbarDropdown"
                  role="button"
                  data-bs-toggle="dropdown"
                  aria-expanded="false"
                >
                  Músicas
                </a>
                <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                  <li><a class="dropdown-item" href="{% url 'musicaestatistica_list' %}">Ver Todas</a></li>
                  <li><a class="dropdown-item" href="{% url 'musicaestatistica_create' %}">Adicionar</a></li>
                </ul>
              </li>
            </ul>
          </div>
        </div>
        <div class="d-flex flex-row-reverse bd-highlight">
          <div class="p-2 ml-5 bd-highlight">
            <a class="btn btn-outline-secondary" href="{% url 'admin:index' %}">Admin</a>
          </div>
        </div>
      </nav>

      <hr />
    </header>
    <main>{% block content %}{% endblock %}</main>
    <footer>
      <hr />
      <p>Projeto BDAI 25/26 - Dulce Travassos</p>
    </footer>
    {% bootstrap_javascript %}

    <!-- Janela pop-up (Toast) - https://getbootstrap.com/docs/5.0/components/toasts/ -->
    <div class="toast-container position-fixed bottom-0 end-0 p-3" style="z-index: 11">
      {% if messages %} <!-- deteta se há alguma mensagem a ser recebida (ver views.py) -->
          {% for message in messages %}
              <div class="toast" role="alert" aria-live="assertive" aria-atomic="true">
                  <div class="toast-header">
                      <div class="rounded me-2" style="width: 20px; height: 20px; background-color: {% if message.tags == 'success' %}#198754{% else %}#dc3545{% endif %};"></div>
                      <strong class="me-auto">Sucesso</strong>
                      <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
                  </div>
                  <div class="toast-body">
                      {{ message }}
                  </div>
              </div>
          {% endfor %}
      {% endif %}
    </div>

    <!-- Script para o Toast poder ser utilizado em vários templates (ver views.py) -->
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            var toastElList = [].slice.call(document.querySelectorAll('.toast')); // Seleciona todos os elementos com a classe .toast
            var toastList = toastElList.map(function(toastEl) {
                var toast = new bootstrap.Toast(toastEl, { delay: 3000 }); // Desaparece após 3 segundos
                toast.show();
                return toast;
            });
        });
    </script>

  </body>
</html>
